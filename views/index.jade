doctype html
html
    head
        title Device Management
        link(href='//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css', rel='stylesheet')
        link(href='stylesheets/style.css', rel='stylesheet')
        script(type='text/javascript', src="https://code.jquery.com/jquery-2.1.3.js")
        script(type='text/javascript', src="javascripts/management.js")

        
    body
        div.container
            div.jumbotron
                h1 Devices
                p View, manage and control the devices in your network from here.
        
        div(class="panel panel-default"  style="float: none; width: 960px; margin-left:auto; margin-right:auto;")  
            div(class="panel-heading") Available Devices     
            div(class="panel-body")
                ul#devices
                    each device, index in devices
                        li.device
                            img(src="images/device_icon.png").device_icon
                            div.properties
                                div.device_id.title Device ID:
                                    div.value #{device.sessionId}
                                |     
                                div.manufacturer.title Manufacturer: 
                                    div.value #{device.manufacturer}
                                |     
                                div.model.title Model: 
                                    div.value #{device.model}
                                |     
                                div.geo.title Geo-location
                                  div.longitude Longitude: 
                                    div.value #{device.geo.longitude}
                                  |       &#x9;
                                  div.latitude.title Latitude:
                                    div.value  #{device.geo.latitude}
                                | 
                                div.sensors
                                  each sensor, sindex in device.sensors
                                      div.sensor
                                        div.sensor_id.title Sensor ID:
                                            div.value  #{sensor.id}
                                        |         
                                        div.sensor_name.title Name:
                                            div.value  #{sensor.name}
                                        |         
                                        div.sensor_sense.title Capability:
                                            div.value  #{sensor.sense}
                                        |         
                                        div.sensor_unit.title Unit:
                                            div.value  #{sensor.unit}
                                        |         
                                        div.sensor_type.title Type:
                                            div.value  #{sensor.type}
                                        |         
                                        div.sensor_stream
                                          div.sensor_chart
                                          button.streamBtn Start stream
                                          |           
                                          button.streamBtn Stop stream
                                |     
                                div.actuators
                                  each actuator, aindex in device.actuators
                                      div.actuator
                                        div.actuator_id.title Actuator ID: 
                                            div.value #{actuator.id}
                                        |         
                                        div.actuator_name.title Name:
                                            div.value #{actuator.name}
                                        |         
                                        div.options.title Options
                                          each option in actuator.options
                                            button.value.optionBtn #{option}


    script(type='text/javascript').
        $( document ).ready(function() {

            var neuronURL = "http://localhost:9998/api/";

            $(".properties").hide();

            $(".device_icon").click(function(event) {
                $(this).siblings().toggle();
            });

            $(".streamBtn").click(function(event) {

                console.log("Inside startBtn click");
                
                var deviceId = $(this).closest(".properties").children().children().html();
                var sensorId = $(this).closest(".sensor").children().children().html();

                //var xhr = new XMLHttpRequest();
                //var url = neuronURL + 

            });
        });
